{{>/layout/main-header}}

<style>
    .my_post_detail_title {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .my_post_detail_title h2 {
        margin-right: 1rem;
    }

    .comment-section {
        margin-top: 2rem;
    }

    .comment-box {
        margin-bottom: 1rem;
    }

    .comment-list {
        margin-top: 1rem;
    }

    .comment {
        padding: 1rem;
        border-bottom: 1px solid #ccc;
    }
</style>

<div class="container">
    <input id="postId" type="hidden" value="{{model.postId}}"/>
    <input id="pageOwnerId" type="hidden" value="1"/>
    <input id="my-loveId" type="hidden" value="1">


    <div class="my_post_detail_title">
        <h2>{{model.title}}</h2>
        <span>ì‘ì„±ì¼ : {{model.createdAt}}</span>
    </div>
    <hr/>

    <div class="my_post_detail_content">
        {{{model.content}}}
    </div>

    <br><br>

    <div class="my_post_info_box d-flex">
        <div class="my_post_info">
            <i class="fa-solid fa-heart my_fake_like my_mr_sm_1" id="heart-1"></i>
            by <b>{{model.username}}</b> <span class="my_text_body_sm"></span>

            <!--            <i class="far fa-heart my_fake_un_like my_mr_sm_1" id="my-heart"></i>-->
            <!--            by <b>ìœ ì €ë„¤ì„</b> <span class="my_text_body_sm">ë‚ ì§œ</span>-->

        </div>
    </div>

    {{#model.isPostOwner}}
        <div class="my_mt_md_1">
            <a class="btn btn-outline-success" href="/post/update-form/{{model.postId}}">ìˆ˜ì •</a>
            <button id="btn-delete" class="btn btn-outline-danger">ì‚­ì œ</button>
        </div>
    {{/model.isPostOwner}}

    <br/><hr>

    <!-- ëŒ“ê¸€ -->
    <div class="card mt-3">
        <!-- ëŒ“ê¸€ë“±ë¡ -->
        <div class="card-body">
            <form action="/reply/save" method="post">
                <input type="hidden" name="postId" value="{{model.postId}}">
                <textarea class="form-control" rows="2" name="comment"></textarea>
                <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-outline-success mt-1">ëŒ“ê¸€ë“±ë¡</button>
                </div>
            </form>
        </div>

        <!-- ëŒ“ê¸€ëª©ë¡ -->
        <div class="card-footer">
            <b>ëŒ“ê¸€ë¦¬ìŠ¤íŠ¸</b>
        </div>
        <div class="list-group">
            {{#model.replyDTOs}}
                <!-- ëŒ“ê¸€ì•„ì´í…œ -->
                <div class="list-group-item d-flex justify-content-between align-items-center">
                    <div class="d-flex">
                        <div class="px-1 me-1 text-white rounded" style="margin-right: 10px; background-color: #1EB49F">
                            {{username}}
                        </div>
                        <div>{{comment}}</div>
                    </div>
                        <form action="/board/delete" method="post">
                            <button class="btn">ğŸ—‘</button>
                        </form>
                </div>
            {{/model.replyDTOs}}
        </div>
    </div>

    <br><br>

        <!-- ëŒ“ê¸€ ì„¹ì…˜ ë -->

        <!--    <div class="my_livere">-->
        <!--        &lt;!&ndash; ë¼ì´ë¸Œë¦¬ ì‹œí‹° ì„¤ì¹˜ ì½”ë“œ &ndash;&gt;-->
        <!--        <div id="lv-container" data-id="city" data-uid="MTAyMC81MTM0MC8yNzgyMQ==">-->
        <!--            <script type="text/javascript">-->
        <!--                (function (d, s) {-->
        <!--                    var j, e = d.getElementsByTagName(s)[0];-->

        <!--                    if (typeof LivereTower === 'function') {-->
        <!--                        return;-->
        <!--                    }-->

        <!--                    j = d.createElement(s);-->
        <!--                    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';-->
        <!--                    j.async = true;-->

        <!--                    e.parentNode.insertBefore(j, e);-->
        <!--                })(document, 'script');-->
        <!--            </script>-->
        <!--            <noscript>ë¼ì´ë¸Œë¦¬ ëŒ“ê¸€ ì‘ì„±ì„ ìœ„í•´ JavaScriptë¥¼ í™œì„±í™” í•´ì£¼ì„¸ìš”</noscript>-->
        <!--        </div>-->
        <!--        &lt;!&ndash; ì‹œí‹° ì„¤ì¹˜ ì½”ë“œ ë &ndash;&gt;-->
        <!--    </div>-->


    <script>
        $("#btn-delete").click(function (e) {

            Swal.fire({
                title: 'ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
                icon: 'warning',

                showCancelButton: true, // cancelë²„íŠ¼ ë³´ì´ê¸°. ê¸°ë³¸ì€ ì›ë˜ ì—†ìŒ
                confirmButtonColor: '#3085d6', // confrim ë²„íŠ¼ ìƒ‰ê¹” ì§€ì •
                cancelButtonColor: '#d33', // cancel ë²„íŠ¼ ìƒ‰ê¹” ì§€ì •
                confirmButtonText: 'ì˜ˆ', // confirm ë²„íŠ¼ í…ìŠ¤íŠ¸ ì§€ì •
                cancelButtonText: 'ì•„ë‹ˆìš”', // cancel ë²„íŠ¼ í…ìŠ¤íŠ¸ ì§€ì •

            }).then(result => {
                // ë§Œì•½ Promiseë¦¬í„´ì„ ë°›ìœ¼ë©´,
                if (result.isConfirmed) { // ë§Œì•½ ëª¨ë‹¬ì°½ì—ì„œ confirm ë²„íŠ¼ì„ ëˆŒë €ë‹¤ë©´
                    Swal.fire('ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤', '', 'success')
                            .then(() => {
                                $.ajax({
                                    type: "POST",
                                    url: "/post/delete/{{model.postId}}",

                                }).done((res) => {
                                    // alert("Ddd");
                                    window.location.href = "/post/list";

                                }).fail((res) => {
                                    alert("ì‹¤íŒ¨");
                                });

                            });
                }
            });
        });

    </script>

{{>/layout/footer}}