{{>/layout/main-header}}

<style>
    .my_post_detail_title {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .my_post_detail_title h2 {
        margin-right: 1rem;
    }
</style>

<div class="container">
    <input id="postId" type="hidden" value="{{model.postId}}"/>
    <input id="pageOwnerId" type="hidden" value="1"/>
    <input id="my-loveId" type="hidden" value="1">


    <div class="my_post_detail_title">
        <h2>{{model.title}}</h2>
        <span>작성일 : {{model.createdAt}}</span>
    </div>
    <hr/>

    <div class="my_post_detail_content">
        {{{model.content}}}
    </div>

    <br><br>

    <div class="my_post_info_box d-flex">
        <div class="my_post_info">
            <i class="fa-solid fa-heart my_fake_like my_mr_sm_1" id="heart-1"></i>
            by <b>{{model.username}}</b> <span class="my_text_body_sm"></span>

            <!--            <i class="far fa-heart my_fake_un_like my_mr_sm_1" id="my-heart"></i>-->
            <!--            by <b>유저네임</b> <span class="my_text_body_sm">날짜</span>-->

        </div>
    </div>

    {{#model.isPostOwner}}
        <div class="my_mt_md_1">
            <a class="btn btn-outline-success" href="/post/update-form/{{model.postId}}">수정</a>
            <button id="btn-delete" class="btn btn-outline-danger">삭제</button>
        </div>
    {{/model.isPostOwner}}

    <br/>

    <div class="my_livere">
        <!-- 라이브리 시티 설치 코드 -->
        <div id="lv-container" data-id="city" data-uid="MTAyMC81MTM0MC8yNzgyMQ==">
            <script type="text/javascript">
                (function (d, s) {
                    var j, e = d.getElementsByTagName(s)[0];

                    if (typeof LivereTower === 'function') {
                        return;
                    }

                    j = d.createElement(s);
                    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                    j.async = true;

                    e.parentNode.insertBefore(j, e);
                })(document, 'script');
            </script>
            <noscript>라이브리 댓글 작성을 위해 JavaScript를 활성화 해주세요</noscript>
        </div>
        <!-- 시티 설치 코드 끝 -->
    </div>
</div>

<script>
    $("#btn-delete").click(function (e) {

        Swal.fire({
            title: '게시글을 삭제하시겠습니까?',
            icon: 'warning',

            showCancelButton: true, // cancel버튼 보이기. 기본은 원래 없음
            confirmButtonColor: '#3085d6', // confrim 버튼 색깔 지정
            cancelButtonColor: '#d33', // cancel 버튼 색깔 지정
            confirmButtonText: '예', // confirm 버튼 텍스트 지정
            cancelButtonText: '아니요', // cancel 버튼 텍스트 지정

        }).then(result => {
            // 만약 Promise리턴을 받으면,
            if (result.isConfirmed) { // 만약 모달창에서 confirm 버튼을 눌렀다면
                Swal.fire('게시글이 삭제되었습니다', '', 'success')
                        .then(() => {
                            $.ajax({
                                type: "POST",
                                url: "/post/delete/{{model.postId}}",

                            }).done((res) => {
                                // alert("Ddd");
                                window.location.href = "/post/list";

                            }).fail((res) => {
                                alert("실패");
                            });

                        });
            }
        });
    });

</script>

{{>/layout/footer}}